(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{351:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"g",(function(){return s})),n.d(e,"e",(function(){return u})),n.d(e,"h",(function(){return l})),n.d(e,"f",(function(){return c})),n.d(e,"d",(function(){return d}));var a=n(57);function r(t,e){return Object(a.a)({url:"/productCategory/list/"+t,method:"get",params:e})}function i(t){return Object(a.a)({url:"/productCategory/delete/"+t,method:"post"})}function o(t){return Object(a.a)({url:"/productCategory/create",method:"post",data:t})}function s(t,e){return Object(a.a)({url:"/productCategory/update/"+t,method:"post",data:e})}function u(t){return Object(a.a)({url:"/productCategory/"+t,method:"get"})}function l(t){return Object(a.a)({url:"/productCategory/update/showStatus",method:"post",data:t})}function c(t){return Object(a.a)({url:"/productCategory/update/navStatus",method:"post",data:t})}function d(){return Object(a.a)({url:"/productCategory/list/withChildren",method:"get"})}n(58)},468:function(t,e,n){"use strict";n.r(e),(o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pms-category-warpper"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"content-warpper"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cateList}},[n("el-table-column",{attrs:{prop:"id",label:"编号",align:"center",width:"80",sortable:"","sort-by":"id"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",align:"center",label:"分类名称",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{label:"层级",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("levelFilter")(e.row.level))+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"productCount",align:"center",label:"商品数量",width:"100",sortable:"","sort-by":"productCount"}}),t._v(" "),n("el-table-column",{attrs:{prop:"productUnit",align:"center",label:"数量单位",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{label:"导航栏",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return t.handleNavStatusChange(e.$index,e.row)}},model:{value:e.row.navStatus,callback:function(n){t.$set(e.row,"navStatus",n)},expression:"scope.row.navStatus"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"是否显示",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return t.handleShowStatusChange(e.$index,e.row)}},model:{value:e.row.showStatus,callback:function(n){t.$set(e.row,"showStatus",n)},expression:"scope.row.showStatus"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"sort",label:"排序",width:"100",align:"center",sortable:"","sort-by":"sort"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sort))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"设置",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",disabled:t._f("disableNextLevel")(e.row.level)},on:{click:function(n){return t.handleShowNextLevel(e.$index,e.row)}}},[t._v("查看下级\n                    ")]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleTransferProduct(e.$index,e.row)}}},[t._v("转移商品\n                    ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleUpdate(e.$index,e.row)}}},[t._v("编辑\n                    ")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("删除\n                    ")])]}}])})],1)],1),t._v(" "),n("div",{staticClass:"pagination-warpper clearfix"},[n("el-button",{staticClass:"btn-brand-add",attrs:{type:"primary",size:"small"},on:{click:t.handleAddProductCate}},[n("i",{staticClass:"icon-iconfontwendang",staticStyle:{"font-size":"14px","padding-right":"5px"}}),t._v("\n            添加分类\n        ")]),t._v(" "),n("div",{staticClass:"pagination-container "},[n("el-pagination",{attrs:{background:"","current-page":t.searchOption.pageNum,"page-sizes":[5,10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalItemCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.searchOption,"pageNum",e)},"update:current-page":function(e){return t.$set(t.searchOption,"pageNum",e)}}})],1)],1)])})._withStripped=!0;var a,r,i,o,s=n(351),u=(i={levelFilter:function(t){return 0===t?"一级":1===t?"二级":void 0},disableNextLevel:function(t){return 0!==t}},(r="filters")in(a={name:"category",data:function(){return{searchOption:{pageNum:1,pageSize:10},listLoading:!0,options:["show","hidden"],optionsSelect:"",cateList:[],totalItemCount:0,selectItems:[]}},created:function(){this.resetParentId(),this.getList()},watch:{$route:function(t){this.resetParentId(),this.getList()}},filters:{levelFilter:function(t){return 0===t?"一级":1===t?"二级":void 0},disableNextLevel:function(t){return 0!==t}},methods:{resetParentId:function(){this.searchOption.pageNum=1,null!=this.$route.query.parentId?this.parentId=this.$route.query.parentId:this.parentId=0},getList:function(){var t=this;this.listLoading=!0,Object(s.c)(this.parentId,this.searchOption).then((function(e){t.listLoading=!1,t.cateList=e.list,t.totalItemCount=e.total}))},handleAddProductCate:function(){this.$router.push("/pms/addProductCate")},handleSizeChange:function(t){this.searchOption.pageNum=1,this.searchOption.pageSize=t,this.getList()},handleCurrentChange:function(t){this.searchOption.pageNum=t,this.getList()},handleNavStatusChange:function(t,e){var n=this,a=new URLSearchParams,r=[];r.push(e.id),a.append("ids",r),a.append("navStatus",e.navStatus),Object(s.f)(a).then((function(t){n.$message({message:"修改成功",type:"success",duration:1e3})}))},handleShowStatusChange:function(t,e){var n=this,a=new URLSearchParams,r=[];r.push(e.id),a.append("ids",r),a.append("showStatus",e.showStatus),Object(s.h)(a).then((function(t){n.$message({message:"修改成功",type:"success",duration:1e3})}))},handleShowNextLevel:function(t,e){this.$router.push({path:"/pms/productCate",query:{parentId:e.id}})},handleTransferProduct:function(t,e){},handleUpdate:function(t,e){this.$router.push({path:"/pms/updateProductCate",query:{id:e.id}})},handleDelete:function(t,e){var n=this;this.$confirm("是否要删除该品牌","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s.b)(e.id).then((function(t){n.$message({message:"删除成功",type:"success",duration:1e3}),n.getList()}))}))}}})?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i,a);n=n(15);(o=Object(n.a)(u,o,[],!1,null,null,null)).options.__file="src/pages/pms/category/index.vue",e.default=o.exports}}]);